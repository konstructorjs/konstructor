# Routes
# Introdution
konstructor uses [koa-router](https://github.com/alexmingoia/koa-router) under the hood and has a thin layer to help automatically import your endpoints for you.

Whenever you reference something in the routes, it will look with the app directory as the root path. So `hello/show` will import `app/hello/show/index.js`.

# Usage
To use the router, you must extend and export `konstructor.router` and have a `routes` method that defines all of your routes. The default routes file generated by konstructor-cli has everything already set up for you.
```
const konstructor = require('konstructor');

module.exports = class routes extends konstructor.router {
  routes() {
    this.get('/', 'hello/index');
  }
};
```

## ['get', 'post', 'put', 'patch', 'delete']
The simple wrapper above koa-router contains the get, post, put, patch, and delete methods.

The method takes the following arguments.
```
this.get(url, endpointPath, [beforeMiddleware], [afterMiddleware])
```
- `url` - The url the router should listen to. I.e. `/` or `/home`, etc.
- `endpointPath` - Where the endpoint is located relative to the app directory. `hello/show` will map to `/app/hello/show/index.js`.
- `[beforeMiddleware]` - An array of custom middleware to call before the route is handled. I.e. authentication/authorization middleware.
- `[afterMiddleware]` - An array of custom middleware to call after the route is handled. I.e. analytics for routes.

## Router
It is also possible to directly access the `koa-router` object. This is useful when the think api wrapper above does not suit your needs.
```
this.router.get('/', async (ctx, next) {
  ctx.body = { hello: 'world' };
});
```
`this.router` is the router object.